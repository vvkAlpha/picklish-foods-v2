<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picklish Foods - Premium Pickles & Subscriptions</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p>Loading Picklish Foods...</p>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="showHome()">
                <i class="fas fa-pepper-hot text-primary"></i>
                <span class="brand-text">Picklish Foods</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showHome()">
                            <i class="fas fa-home"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showShop()">
                            <i class="fas fa-store"></i> Shop
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSubscriptions()">
                            <i class="fas fa-calendar-alt"></i> Subscriptions
                        </a>
                    </li>
                    <li class="nav-item" id="adminNavItem" style="display: none;">
                        <a class="nav-link" href="#" onclick="showAdmin()">
                            <i class="fas fa-cog"></i> Admin
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link position-relative" href="#" onclick="toggleCart()">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="badge bg-primary rounded-pill position-absolute top-0 start-100 translate-middle" id="cartBadge">0</span>
                        </a>
                    </li>
                    <li class="nav-item" id="userMenu" style="display: none;">
                        <div class="dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <img id="userAvatar" src="" alt="User" class="rounded-circle me-2" width="30" height="30">
                                <span id="userName"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="showProfile()">
                                    <i class="fas fa-user"></i> Profile
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="showOrders()">
                                    <i class="fas fa-box"></i> Orders
                                </a></li>
                                <li><a class="dropdown-item" href="#" onclick="showLoyalty()">
                                    <i class="fas fa-gift"></i> Loyalty
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" onclick="signOut()">
                                    <i class="fas fa-sign-out-alt"></i> Sign Out
                                </a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item" id="loginButton">
                        <button class="btn btn-primary" onclick="signIn()">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container-fluid px-0">
        <!-- Home View -->
        <div id="homeView" class="view">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="container">
                    <div class="row align-items-center min-vh-50">
                        <div class="col-lg-6">
                            <h1 class="display-4 fw-bold text-primary mb-4">
                                Premium Pickles Delivered Fresh
                            </h1>
                            <p class="lead mb-4">
                                Discover our handcrafted collection of gourmet pickles. From premium meats to ocean delights and garden fresh vegetables - taste the tradition.
                            </p>
                            <div class="d-flex gap-3">
                                <button class="btn btn-primary btn-lg" onclick="showShop()">
                                    <i class="fas fa-shopping-bag"></i> Shop Now
                                </button>
                                <button class="btn btn-outline-primary btn-lg" onclick="showSubscriptions()">
                                    <i class="fas fa-calendar-alt"></i> Subscribe
                                </button>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="hero-image">
                                <i class="fas fa-pepper-hot hero-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section py-5">
                <div class="container">
                    <h2 class="text-center mb-5">Why Choose Picklish Foods?</h2>
                    <div class="row g-4">
                        <div class="col-md-4">
                            <div class="feature-card text-center">
                                <i class="fas fa-leaf feature-icon text-success mb-3"></i>
                                <h4>Premium Quality</h4>
                                <p>Handpicked ingredients and traditional recipes ensure the finest taste in every jar.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-card text-center">
                                <i class="fas fa-truck feature-icon text-primary mb-3"></i>
                                <h4>Fresh Delivery</h4>
                                <p>Regular delivery schedules with flexible subscription options to suit your needs.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-card text-center">
                                <i class="fas fa-star feature-icon text-warning mb-3"></i>
                                <h4>Customer Reviews</h4>
                                <p>Read authentic reviews and share your experience with our community.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Shop View -->
        <div id="shopView" class="view" style="display: none;">
            <div class="container py-4">
                <div class="row">
                    <div class="col-lg-3">
                        <!-- Filters -->
                        <div class="filter-section">
                            <h5 class="mb-3">Filter Products</h5>
                            <div class="filter-group">
                                <h6>Categories</h6>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="premium-meats" id="premiumMeats" onchange="filterProducts()">
                                    <label class="form-check-label" for="premiumMeats">Premium Meats</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="ocean-delights" id="oceanDelights" onchange="filterProducts()">
                                    <label class="form-check-label" for="oceanDelights">Ocean Delights</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="garden-fresh" id="gardenFresh" onchange="filterProducts()">
                                    <label class="form-check-label" for="gardenFresh">Garden Fresh</label>
                                </div>
                            </div>
                            <div class="filter-group mt-3">
                                <h6>Price Range</h6>
                                <input type="range" class="form-range" min="0" max="1000" id="priceRange" onchange="filterProducts()">
                                <div class="d-flex justify-content-between">
                                    <span>₹0</span>
                                    <span id="maxPrice">₹1000</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Our Premium Pickles</h2>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-secondary btn-sm" onclick="sortProducts('name')">
                                    <i class="fas fa-sort-alpha-down"></i> Name
                                </button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="sortProducts('price')">
                                    <i class="fas fa-sort-numeric-down"></i> Price
                                </button>
                            </div>
                        </div>
                        <div id="productsGrid" class="row g-4">
                            <!-- Products will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subscriptions View -->
        <div id="subscriptionsView" class="view" style="display: none;">
            <div class="container py-4">
                <h2 class="mb-4">Subscription Plans</h2>
                <div class="row g-4" id="subscriptionPlans">
                    <!-- Subscription plans will be loaded here -->
                </div>
                
                <!-- User Subscriptions -->
                <div id="userSubscriptions" class="mt-5" style="display: none;">
                    <h3>Your Subscriptions</h3>
                    <div id="subscriptionsList">
                        <!-- User subscriptions will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin View -->
        <div id="adminView" class="view" style="display: none;">
            <div class="container py-4">
                <div class="row">
                    <div class="col-12">
                        <div class="admin-header mb-4">
                            <h2>Admin Dashboard</h2>
                            <nav class="nav nav-pills">
                                <a class="nav-link active" onclick="showAdminSection('orders')">Orders</a>
                                <a class="nav-link" onclick="showAdminSection('subscriptions')">Subscriptions</a>
                                <a class="nav-link" onclick="showAdminSection('products')">Products</a>
                                <a class="nav-link" onclick="showAdminSection('users')">Users</a>
                                <a class="nav-link" onclick="showAdminSection('vouchers')">Vouchers</a>
                            </nav>
                        </div>
                        
                        <div id="adminContent">
                            <!-- Admin content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile/Orders View -->
        <div id="profileView" class="view" style="display: none;">
            <div class="container py-4">
                <div class="row">
                    <div class="col-md-3">
                        <div class="profile-sidebar">
                            <nav class="nav flex-column nav-pills">
                                <a class="nav-link active" onclick="showProfileSection('profile')">Profile</a>
                                <a class="nav-link" onclick="showProfileSection('orders')">Order History</a>
                                <a class="nav-link" onclick="showProfileSection('subscriptions')">My Subscriptions</a>
                                <a class="nav-link" onclick="showProfileSection('reviews')">My Reviews</a>
                            </nav>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div id="profileContent">
                            <!-- Profile content will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loyalty View -->
        <div id="loyaltyView" class="view" style="display: none;">
            <div class="container py-4">
                <h2 class="mb-4">Loyalty Program</h2>
                <div class="row">
                    <div class="col-md-6">
                        <div class="loyalty-card">
                            <h4>Your Loyalty Points</h4>
                            <div class="points-display">
                                <span id="loyaltyPoints">0</span>
                                <small>points</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="voucher-section">
                            <h4>Redeem Vouchers</h4>
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="voucherCode" placeholder="Enter voucher code">
                                <button class="btn btn-primary" onclick="redeemVoucher()">Redeem</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="availableVouchers" class="mt-4">
                    <!-- Available vouchers will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Shopping Cart Sidebar -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h5>Shopping Cart</h5>
            <button class="btn-close" onclick="toggleCart()"></button>
        </div>
        <div class="cart-content">
            <div id="cartItems">
                <!-- Cart items will be loaded here -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <strong>Total: ₹<span id="cartTotal">0</span></strong>
                </div>
                <div class="voucher-input mb-3">
                    <input type="text" class="form-control" id="cartVoucherCode" placeholder="Voucher code">
                    <button class="btn btn-sm btn-outline-primary" onclick="applyVoucher()">Apply</button>
                </div>
                <button class="btn btn-primary w-100" onclick="proceedToCheckout()">
                    <i class="fas fa-credit-card"></i> Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Product Modal -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalTitle">Product Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="productModalBody">
                    <!-- Product details will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal fade" id="reviewModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Write a Review</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="reviewForm">
                        <div class="mb-3">
                            <label class="form-label">Rating</label>
                            <div class="rating-input">
                                <input type="radio" name="rating" value="5" id="star5">
                                <label for="star5"><i class="fas fa-star"></i></label>
                                <input type="radio" name="rating" value="4" id="star4">
                                <label for="star4"><i class="fas fa-star"></i></label>
                                <input type="radio" name="rating" value="3" id="star3">
                                <label for="star3"><i class="fas fa-star"></i></label>
                                <input type="radio" name="rating" value="2" id="star2">
                                <label for="star2"><i class="fas fa-star"></i></label>
                                <input type="radio" name="rating" value="1" id="star1">
                                <label for="star1"><i class="fas fa-star"></i></label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Review</label>
                            <textarea class="form-control" id="reviewText" rows="4"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Photos (Optional)</label>
                            <input type="file" class="form-control" id="reviewPhotos" multiple accept="image/*">
                        </div>
                        <button type="submit" class="btn btn-primary">Submit Review</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <!-- Firebase Scripts -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/shop.js"></script>
    <script type="module" src="js/cart.js"></script>
    <script type="module" src="js/subscriptions.js"></script>
    <script type="module" src="js/admin.js"></script>
    <script type="module" src="js/reviews.js"></script>
    <script type="module" src="js/loyalty.js"></script>
    <script type="module" src="js/payments.js"></script>
    <script type="module" src="js/google-sheets.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
